{
  "hash": "a6ed3147200bcdd98d460fcbf03ea61b",
  "result": {
    "markdown": "---\ntitle: \"Oregon Liquor Analysis\"\nauthor: \"Rochelle Rafn\"\ndate: \"2023-03-20\"\ncategories: [news, code, analysis, visualization]\nimage: \"DSC_0325.jpg\"\nformat:\n  html: \n    code-fold: true\n    code-summary: \"Show Code\"\n---\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nor_sales <- read.csv('/Users/rochellerafn/RStudio_Files/liquor-analysis/OR-Liquor-Sales-Store.csv')\n\n# Formatting the 'Month' column with lubridate so that ggplot will recognize the colunn as a month and order chronogically and not alphabetically.\nor_sales <- or_sales %>%\n  mutate(Month = month.name[Month], Year = as.character(Year))\n\nor_sales$Month = factor(or_sales$Month, levels = month.name)\n\n# Creating a table that focuses on the total sales by month and year.\nor_sales_yearly <- or_sales %>%\n  group_by(Year, Month) %>%\n  summarize(sum(Total.Sales))\n\nor_sales_yearly <- or_sales_yearly %>%\n  rename(\"Total.Sales\" = \"sum(Total.Sales)\")\n```\n:::\n\n\n\n### There is a striking consistency to the seasonality of liquor sales year over year.\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(MetBrewer)\ndevtools::install_github(\"BlakeRMills/MetBrewer\")\n\nor_sales_yearly %>%\n  filter(Year < 2023) %>%\nggplot(aes(Month, Total.Sales, group = Year, color = Year)) +\n  geom_line(stat = \"identity\")+\n  scale_y_continuous(labels = scales::comma)+\n  theme(panel.background = element_blank(),\n        plot.background = element_blank(),\n        axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+\n  scale_color_met_d(\"Klimt\")+\n  labs(title = \"Seasonality of Oregonian's Liquor Consumption is Consistent\",\n       subtitle = \"Total Liquor Sales in Oregon\",\n       y = \"Total Sales (in dollars)\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n### Sales for liquor in Oregon is continuing to grow year over year.\n\n::: {.cell}\n\n```{.r .cell-code}\nor_sales_yearly %>%\n  filter(Year < 2023) %>%\nggplot(aes(Year, Total.Sales, fill = Year, color = Year))+\n  geom_col(stat = \"identity\")+\n  scale_y_continuous(labels = scales::comma)+\n  theme(panel.background = element_blank(),\n        plot.background = element_blank())+\n  scale_fill_met_d(\"Klimt\")+\n  scale_color_met_d(\"Klimt\")+\n  labs(y = \"Total Sales (in dollars)\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Creating a table focused on total sales by store location\nor_store_sales <- or_sales %>%\n  group_by(Year, Month, BusinessName) %>%\n  summarize(sum(Total.Sales))\n\nor_store_sales <- or_store_sales %>%\n  rename(\"Total.Sales\" = \"sum(Total.Sales)\") %>%\n  arrange(desc(Total.Sales))\n\n# Creating a table focused on total sales by county\nor_county_sales <- or_sales %>%\n  group_by(Year, Month, COUNTY) %>%\n  filter(Year < 2023) %>%\n  summarize(sum(Total.Sales))\n\nor_county_sales <- or_county_sales %>%\n  rename(\"Total.Sales\" = \"sum(Total.Sales)\") %>%\n  arrange(desc(Total.Sales))\n```\n:::\n\n\n### Looking at total liquor sales by county\n\n::: {.cell}\n\n```{.r .cell-code}\nor_county_sales %>%\nggplot(aes(reorder(COUNTY, -Total.Sales), Total.Sales, fill = COUNTY)) +\n  geom_col()+\n  scale_y_continuous()+\n  theme_void()+\n  theme(legend.position = \"none\",\n        axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1, size = 5))+\n  facet_wrap(~Year)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Bringing in an olcc spreadsheet that specifies number of units sold and sales broken down by liquor type\nproduct_sales_2020 <- readxl::read_xlsx('/Users/rochellerafn/RStudio_Files/liquor-analysis/Product-Sales-Data-CY2020.xlsx', sheet = \"750 ml\")\n\n# Cleaning up column names\ncolnames(product_sales_2020)[4] = \"Units_Sold\"\ncolnames(product_sales_2020)[5] = \"Units_Price\"\n\n# Creating a columnn for total sales (number of units * approximate price)\nproduct_sales_2020 <- product_sales_2020 %>%\n  mutate(Total_Sales = Units_Sold * Units_Price)\n```\n:::\n\n\n\n### Categories of Liquor Type\n\n::: {.cell}\n\n```{.r .cell-code}\n# Different liquor categories\nunique(product_sales_2020$Category)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"VODKA\"                 \"IRISH\"                 \"CANADIAN\"             \n [4] \"DOMESTIC WHISKEY\"      \"RUM\"                   \"CORDIALS\"             \n [7] \"TEQUILA\"               \"BRANDY / COGNAC\"       \"GIN\"                  \n[10] \"NEUTRAL GRAIN SPIRIT\"  \"COCKTAILS\"             \"SCOTCH\"               \n[13] \"OTHER IMPORTED WHISKY\" \"CACHACA\"               NA                     \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Grouping Category so I can analyze total sales by liquor type\nproduct_total_sales_2020 <- product_sales_2020 %>%\n  group_by(Category) %>%\n  summarize(sum(Total_Sales))\n\nproduct_total_sales_2020 <- product_total_sales_2020 %>%\n  rename(\"Total_Sales\" = \"sum(Total_Sales)\") %>%\n  arrange(desc(Total_Sales))\n```\n:::\n\n\n\n### Total sales revenue by liquor type in 2020\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(product_total_sales_2020, aes(reorder(Category, -Total_Sales), Total_Sales, group = Category, fill = Category))+\n  geom_col(stat = \"identity\")+\n  scale_y_continuous(labels = scales::comma)+\n  theme(panel.background = element_blank(),\n        plot.background = element_blank(),\n        legend.position = \"none\")+\n  scale_fill_met_d(\"Signac\")+\n  labs(y = \"Total Sales (in dollars)\",\n       x = \"Liquor Type\")+\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Focusing on total number of units sold by liquor type\nproduct_total_count_2020 <- product_sales_2020 %>%\n  group_by(Category) %>%\n  summarize(sum(Units_Sold))\n\nproduct_total_count_2020 <- product_total_count_2020 %>%\n  rename(\"Total_Units_Sold\" = \"sum(Units_Sold)\") %>%\n  arrange(desc(Total_Units_Sold))\n```\n:::\n\n\n\n### Number of units sold in 2020 by liquor type\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(product_total_count_2020, aes(reorder(Category, -Total_Units_Sold), Total_Units_Sold, group = Category, fill = Category))+\n  geom_col(stat = \"identity\")+\n  scale_y_continuous(labels = scales::comma)+\n  theme(panel.background = element_blank(),\n        plot.background = element_blank(),\n        legend.position = \"none\")+\n  scale_fill_met_d(\"Signac\")+\n  labs(y = \"Total Units Sold\",\n       x = \"Liquor Type\")+\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}