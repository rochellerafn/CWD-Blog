---
title: "OR Liquor County Sales Repository"
author: "Rochelle Rafn"
date: "04/16/2023"
format: 
   html:
     code-fold: true
     code-summary: "Show Code"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(message=FALSE, warning=FALSE)
```

#### Creating a function for a parameterized markdown
Year over year sales reports for each county in Oregon regarding total liquor sales
```{r}
library(rmarkdown)
library(purrr)

or_county_sales <- function(x) {
  render("OR_County_Parameters.qmd", 
         params = list(county = x), 
         output_file = paste0("/Users/rochellerafn/RStudio_Files/Data_Communication/CWD-Blog/posts/or-liquor-analysis-2/county_files/",x,".html"))
}

county_liquor_sales <- read.csv("/Users/rochellerafn/RStudio_Files/Data_Communication/CWD-Blog/or_county_sales.csv")
county_liquor_sales$COUNTY %>% map(., function(x) { or_county_sales(x)})
```

## County Liquor Sales
```{r}
library(tidyverse)
library(DT)


county_liquor_sales <- read.csv("/Users/rochellerafn/RStudio_Files/Data_Communication/CWD-Blog/or_county_sales.csv")

county_liquor_sales <- county_liquor_sales %>%
  select(-Month, -X) %>%
  group_by(COUNTY, Year) %>%
  rename("County" = "COUNTY") %>%
  summarize(sum(Total.Sales)) %>%
  rename("Total.Sales" = "sum(Total.Sales)") %>%
  arrange(Year)

datatable(county_liquor_sales)
```

